diff --git a/simple/6252547.c b/simple/6252547.c
--- a/simple/6252547.c
+++ b/simple/6252547.c
@@ -1,10 +1,6 @@
 
 #define NULL (void*)0
 
-#ifdef CONFIG_TWL4030_CORE
-#define CONFIG_IRQ_DOMAIN
-#endif
-
 #ifdef CONFIG_IRQ_DOMAIN
 int irq_domain_simple_ops = 1;
 
@@ -17,13 +13,13 @@
 #ifdef CONFIG_TWL4030_CORE
 int twl_probe()
 {
+#ifdef CONFIG_IRQ_DOMAIN
   int *ops = NULL; // (2)
 
-#ifdef CONFIG_OF_IRQ
   ops = &irq_domain_simple_ops;
-#endif
 
   irq_domain_add(ops); // (3)
+#endif
 }
 #endif
 
